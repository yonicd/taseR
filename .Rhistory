});
});
")
pJS$stop()
pJS <- phantom()
Sys.sleep(5)
remDr <- remoteDriver(browserName = "phantom")
remDr$open()
result <- remDr$phantomExecute("var page = require(\'webpage\').create();
var fs = require(\'fs\');
var path = \'tase_out.html\';
var webPAgeAddress  = \'http://www.tase.co.il/Eng/general/company/Pages/companyHistoryData.aspx?companyID=000281&subDataType=0&shareID=00281014\';
page.open(webPAgeAddress , function (status) {
page.includeJs(\'http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\', function() {
console.log(\'clicking\') ;
var myBtnValue = page.evaluate(function() {
var myBtn = $(\'#trhistory0\').find(\':button\') ;
$(\'#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_rbPeriod8\').prop(\'checked\', true);
$(\'#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_dailyFromCalendar_TaseCalendar_dateInput_TextBox\').val(\'24/03/2015\');
$(\'#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_dailyToCalendar_TaseCalendar_dateInput_TextBox\').val(\'24/04/2015\');
$(\'#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_rbFrequency1\').prop(\'checked\', true);
myBtn.click();
return myBtn.attr(\'value\') ;
});
console.log(\'clicked\') ;
//console.log(myBtnValue) ;
window.setTimeout(function () {
console.log(\'time out\') ;
var content = page.content;
fs.write(path,content,\'w\') ;
phantom.exit();
} , 8000);
});
});
")
pJS$stop()
pJS$stop()
pJS <- phantom()
remDr <- remoteDriver(browserName = "phantom")
remDr$open()
result <- remDr$phantomExecute("var page = require('webpage').create();
var fs = require('fs');
var path = 'tase_out.html';
var webPAgeAddress  = 'http://www.tase.co.il/Eng/general/company/Pages/companyHistoryData.aspx?companyID=000281&subDataType=0&shareID=00281014';
page.open(webPAgeAddress , function (status) {
page.includeJs('http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js', function() {
console.log('clicking') ;
var myBtnValue = page.evaluate(function() {
var myBtn = $('#trhistory0').find(':button') ;
$('#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_rbPeriod8').prop('checked', true);
$('#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_dailyFromCalendar_TaseCalendar_dateInput_TextBox').val('24/02/2015');
$('#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_dailyToCalendar_TaseCalendar_dateInput_TextBox').val('24/04/2015');
$('#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_rbFrequency1').prop('checked', true);
myBtn.click();
return myBtn.attr('value') ;
});
console.log('clicked') ;
//console.log(myBtnValue) ;
window.setTimeout(function () {
console.log('time out') ;
var content = page.content;
fs.write(path,content,'w') ;
phantom.exit();
} , 8000);
});
});
")
pJS$stop()
url="tase_out.html"
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'gridHistoryData_DataGrid1')]"))
metaNode =getNodeSet(htmlParse(url),("//table[contains(@id,'securityGrid_DataGrid1')]"))
length(metaNode)==0
tase=left_join(
readHTMLTable(metaNode[[1]],header = T)[1,c(1:4)]%>%mutate(x=1),
readHTMLTable(dataNode[[1]],header = T)%>%
mutate_each(funs(as.Date(.,"%d/%m/%Y")),contains("date"))%>%
mutate_each(funs(as.numeric(gsub("[,|%]","",.))),-contains("date"),-ends_with("type"))%>%mutate(x=1),
by="x")%>%
select(-x)
View(tase)
View(tase)
pJS$stop()
pJS <- phantom()
remDr <- remoteDriver(browserName = "phantom")
remDr$open()
result <- remDr$phantomExecute(readLines("get_tase.js"))
pJS$stop()
Jin="var page = require('webpage').create();
var fs = require('fs');
var path = 'tase_out.html';
var webPAgeAddress  = 'http://www.tase.co.il/Eng/general/company/Pages/companyHistoryData.aspx?companyID=000281&subDataType=0&shareID=00281014';
page.open(webPAgeAddress , function (status) {
page.includeJs('http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js', function() {
console.log('clicking') ;
var myBtnValue = page.evaluate(function() {
var myBtn = $('#trhistory0').find(':button') ;
$('#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_rbPeriod8').prop('checked', true);
$('#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_dailyFromCalendar_TaseCalendar_dateInput_TextBox').val('24/02/2015');
$('#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_dailyToCalendar_TaseCalendar_dateInput_TextBox').val('24/04/2015');
$('#ctl00_SPWebPartManager1_g_301c6a3d_c058_41d6_8169_6d26c5d97050_ctl00_HistoryData1_rbFrequency1').prop('checked', true);
myBtn.click();
return myBtn.attr('value') ;
});
console.log('clicked') ;
//console.log(myBtnValue) ;
window.setTimeout(function () {
console.log('time out') ;
var content = page.content;
fs.write(path,content,'w') ;
phantom.exit();
} , 8000);
});
});"
pJS <- phantom()
remDr <- remoteDriver(browserName = "phantom")
remDr$open()
result <- remDr$phantomExecute(Jin)
readLines("get_tase.js")
paste0(readLines("get_tase.js"))
paste0(readLines("get_tase.js"),collapse = "")
Jin
pJS$stop()
Jin0=paste0(readLines("get_tase.js"),collapse = "")
pJS <- phantom()
remDr <- remoteDriver(browserName = "phantom")
remDr$open()
result <- remDr$phantomExecute(Jin)
result <- remDr$phantomExecute(Jin0)
pJS$stop()
pJS <- phantom()
remDr <- remoteDriver(browserName = "phantom")
remDr$open()
result <- remDr$phantomExecute(Jin0)
pJS$stop()
Jin0=paste0(readLines("get_tase.js"),collapse = "\n")
Jin0
Jin
pJS <- phantom()
remDr <- remoteDriver(browserName = "phantom")
remDr$open()
result <- remDr$phantomExecute(Jin0)
pJS$stop()
intraday=T
From.Date = format(Sys.Date()-days(10)
)
indexID='142'
tase.index.intraday(indexID,From.Date,To.Date)
pJS <- phantom()
remDr <- remoteDriver(browserName = "phantom")
remDr$open()
result <- remDr$phantomExecute(Jin0)
Jin=paste0(readLines("get_tase.js"),collapse = "\n")
pJS$stop()
pJS <- phantom()
remDr <- remoteDriver(browserName = "phantom")
remDr$open()
Jin=paste0(readLines("get_tase.js"),collapse = "\n")
result <- remDr$phantomExecute(Jin)
pJS$stop()
url="tase_out.html"
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'gridHistoryData_DataGrid1')]"))
metaNode =getNodeSet(htmlParse(url),("//table[contains(@id,'securityGrid_DataGrid1')]"))
x=unlist(sapply(xpathSApply(dataNode[[1]],'//a',xmlAttrs),'[[',1))
From.Date
To.Date
tase.index.intraday(indexID,From.Date,To.Date)
From.Date
To.Date
From.Date = format(Sys.Date()-days(10),"%d/%m/%Y")
From.Date
tase.index.intraday(indexID,From.Date,To.Date)
pJS <- phantom()
remDr <- remoteDriver(browserName = "phantom")
remDr$open()
Jin=paste0(readLines("get_tase.js"),collapse = "\n")
result <- remDr$phantomExecute(Jin)
pJS$stop()
url="tase_out.html"
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'gridHistoryData_DataGrid1')]"))
metaNode =getNodeSet(htmlParse(url),("//table[contains(@id,'securityGrid_DataGrid1')]"))
x=unlist(sapply(xpathSApply(dataNode[[1]],'//a',xmlAttrs),'[[',1))
x=x[grepl("csv",x)]
tase=mdply(x,.fun = function(xin){
suppressWarnings(
read.csv(xin,
header = T,
skip = 1,
col.names = c("Time","LastIndex","IndexType","Change"),
stringsAsFactors = F))})
View(tase)
tase.security(companyID=cID,shareID=sID,From.Date,To.Date,subDataType=Dtype,Freq)
pJS <- phantom()
remDr <- remoteDriver(browserName = "phantom")
remDr$open()
Jin=paste0(readLines("get_tase.js"),collapse = "\n")
result <- remDr$phantomExecute(Jin)
pJS$stop()
url="tase_out.html"
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'gridHistoryData_DataGrid1')]"))
metaNode =getNodeSet(htmlParse(url),("//table[contains(@id,'securityGrid_DataGrid1')]"))
tase=left_join(
readHTMLTable(metaNode[[1]],header = T)[1,c(1:4)]%>%mutate(x=1),
readHTMLTable(dataNode[[1]],header = T)%>%
mutate_each(funs(as.Date(.,"%d/%m/%Y")),contains("date"))%>%
mutate_each(funs(as.numeric(gsub("[,|%]","",.))),-contains("date"),-ends_with("type"))%>%mutate(x=1),
by="x")%>%
select(-x)
View(tase)
source('~/GitHub/tase/cal_tase_index_components.r', echo=TRUE)
tase.index.component("142","20/04/2015")
system("phantomjs.exe get_tase.js")
url="tase_out.html"
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'gridHistoryData_DataGrid1')]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'DataGrid1')]"))
metaNode =getNodeSet(htmlParse(url),("//table[contains(@id,'securityGrid_DataGrid1')]"))
tase=readHTMLTable(dataNode[[1]],header = T)
View(tase)
View(tase)
tase=readHTMLTable(dataNode[[1]],header = T)%>%group_by(Symbol)%>%do(.,head(.,1))
View(tase)
tase=readHTMLTable(dataNode[[1]],header = T)
View(tase)
tase=readHTMLTable(dataNode[[1]],header = T)%>%group_by(Name)%>%do(.,head(.,1))
View(tase)
View(tase)
tase=readHTMLTable(dataNode[[1]],header = T)%>%group_by(Name)%>%do(.,head(.,1))%>%
ungroup%>%filter(Name!='1')
tase=readHTMLTable(dataNode[[1]],header = T)%>%group_by(Name)%>%do(.,head(.,1))
names(tase)
readHTMLTable(dataNode[[1]],header = T)%>%group_by(Name)%>%do(.,head(.,1))%>%
slice(-1)
tase=readHTMLTable(dataNode[[1]],header = T)%>%group_by(Name)%>%do(.,head(.,1))%>%
select(-c(""))%>%slice(-1)
tase=readHTMLTable(dataNode[[1]],header = T)%>%group_by(Name)%>%do(.,head(.,1))%>%ungroup
tase=tase[-1,-9]
tase=readHTMLTable(dataNode[[1]],header = T)%>%group_by(Name)%>%do(.,head(.,1))%>%ungroup
names()tase
names(tase)
tase%>%select()
tase%>%select("")
tase%>%select(contains(""))
tase%>%select(contains(" "))
tase=tase[-1,-9]
tase=readHTMLTable(dataNode[[1]],header = T)
View(tase)
readHTMLTable(dataNode[[1]],header = T)%>%filter(!Symbol%in%c("NA",""))
View(tase)
readHTMLTable(dataNode[[1]],header = T)%>%filter(!is.na(ISIN))
tase=readHTMLTable(dataNode[[1]],header = T)%>%filter(!is.na(ISIN))
readHTMLTable(dataNode[[1]],header = T)group_by(Name)%>%filter(!is.na(ISIN))
readHTMLTable(dataNode[[1]],header = T)%>%group_by(Name)%>%filter(!is.na(ISIN))
readHTMLTable(dataNode[[1]],header = T)%>%group_by(Name)%>%do(filter(!is.na(ISIN)))
readHTMLTable(dataNode[[1]],header = T)%>%group_by(Name)%>%do(.,filter(!is.na(.$ISIN)))
readHTMLTable(dataNode[[1]],header = T)%>%group_by(Name)%>%filter(!is.na(ISIN))
names(dataNode[[1]])
tase=readHTMLTable(dataNode[[1]],header = T,check.names=T)
View(tase)
tase=readHTMLTable(dataNode[[1]],header = T)
tase=tase[,-c(9,10)]%>%filter(!is.na(ISIN))
View(tase)
View(tase)
tase.index.component("137","20/04/2015")
system("phantomjs.exe get_tase.js")
url="tase_out.html"
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'gridHistoryData_DataGrid1')]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'DataGrid1')]"))
metaNode =getNodeSet(htmlParse(url),("//table[contains(@id,'securityGrid_DataGrid1')]"))
tase=readHTMLTable(dataNode[[1]],header = T)
tase=tase[,-c(9,10)]%>%filter(!is.na(ISIN))
View(tase)
url='www.tase.co.l/Eng/Management/GeneralPages/Pages/GridOnSeparatePage.aspx?Action=1&amp;subDataType=2&amp;IndexId=137&amp;day=1&amp;GridId=98&amp;CurGuid={F9AF0818-85CC-43D3-AE34-76D89C0EB977}'
getNodeSet(htmlParse(url),"//table")
url='www.tase.co.l/Eng/Management/GeneralPages/Pages/GridOnSeparatePage.aspx?Action=1&subDataType=2&IndexId=137&day=1&GridId=98&CurGuid={F9AF0818-85CC-43D3-AE34-76D89C0EB977}'
getNodeSet(htmlParse(url),"//table")
url='www.tase.co.il/Eng/Management/GeneralPages/Pages/GridOnSeparatePage.aspx?Action=1&subDataType=2&IndexId=137&day=1&GridId=98&CurGuid={F9AF0818-85CC-43D3-AE34-76D89C0EB977}'
getNodeSet(htmlParse(url),"//table")
rnorm(10,0,1)
rbeta(10,4,2)
df=data.frame(x=c(1:10),y1=rnorm(10,0,1),y2=10*rbeta(10,4,2))
set.seed(123)
df=data.frame(x=c(1:10),y1=rnorm(10,0,1),y2=10*rbeta(10,4,2))
df=df%>%melt(.,id="x")
library(reshape2)
install.packages("reshape2")
library(reshape2)
df=df%>%melt(.,id="x")
p=ggplot(df,aes(x=x,y=value,colour=variable))+geom_line()
install.packages("ggplot2")
library(ggplot2)
p=ggplot(df,aes(x=x,y=value,colour=variable))+geom_line()
p+facet_wrap(~variable,ncol=1,scales="free_y")
install.packages("gridExtra")
library(gridExtra)
vplayout <- function(x, y) viewport(layout.pos.row = x, layout.pos.col = y)
set.seed(123)
df=data.frame(x=c(1:10),y1=rnorm(10,0,1),y2=10*rbeta(10,4,2))
df.long=df%>%melt(.,id="x")
p1=ggplot(df.long,aes(x=x,y=y1))+geom_line()+ylab("y1 label")
p2=ggplot(df.long,aes(x=x,y=y2))+geom_line()+ylab("y2 label")
grid.newpage()
pushViewport(viewport(layout = grid.layout(2, 2)))
print(p1, vp = vplayout(1, 1))
p1=ggplot(df,aes(x=x,y=y1))+geom_line()+ylab("y1 label")
p2=ggplot(df,aes(x=x,y=y2))+geom_line()+ylab("y2 label")
print(p1, vp = vplayout(1, 1))
print(p2, vp = vplayout(1, 2))
dev.off()
grid.newpage()
pushViewport(viewport(layout = grid.layout(2, 1)))
print(p1, vp = vplayout(1, 1))
print(p2, vp = vplayout(1, 2))
print(p2, vp = vplayout(2, 1))
rm(list=ls())
stockIDs=read.csv("stockIDs.csv")
View(stockIDs)
stockIDs=read.csv("stockIDs.csv")
stockIDs=read.csv("stockIDs.csv")
tickers=read.csv("tickers.csv")
View(stockIDs)
View(tickers)
View(stockIDs)
names(tickers)
tickers=tickers%>%mutate(shareID=as.numeric(gsub("[A-Z]","",ISIN)))
library(dplyr)
tickers=tickers%>%mutate(shareID=as.numeric(gsub("[A-Z]","",ISIN)))
View(tickers)
stockID=keft_join(tickers,stockIDs,id="shareID")
stockID=left_join(tickers,stockIDs,id="shareID")
View(stockID)
stockIDs%>%summarise_each(funs(class))
tickers%>%summarise_each(funs(class))
stockID=left_join(tickers,stockIDs%>%mutate(shareID=as.numeric(shareID)),id="shareID")
View(stockID)
tickers=read.csv("tickers.csv")
stockIDs%>%summarise_each(funs(class))
tickers%>%summarise_each(funs(class))
View(stockIDs)
tickers=read.csv("tickers.csv")
tickers%>%summarise_each(funs(class))
stockID=left_join(tickers,stockIDs,id="shareID")
View(stockID)
stockID=left_join(tickers,stockIDs,by="shareID")
View(stockID)
View(stockIDs)
View(stockIDs)
tickers=read.csv("tickers.csv")
stockID=left_join(tickers,stockIDs,by="shareID")
View(stockID)
View(stockIDs)
View(stockIDs)
stockID%>%filter(is.na(companyID))
stockID%>%filter(is.na(companyID))%>%View
write.csv(stockID,"combine_stockinfo.csv")
stockID=left_join(tickers,stockIDs,by="shareID")%>%rename(Name.Full=name)
View(stockID)
View(stockIDs)
library(lubridate)
library(XML)
library(plyr)
library(dplyr)
library(RSelenium)
source("call_tase.r");source("call_tase_index.r");source("call_tase_index_intraday.r");source("call_tase_index_components.r")
source("call_tase_index_components.r")
From.Date = format(Sys.Date()-months(3),"%d/%m/%Y")
indexID='142'
tase.index.component(indexID,From.Date)
system("phantomjs.exe get_tase.js")
url="tase_out.html"
metaNode =getNodeSet(htmlParse(url))
url="tase_out.html"
metaNode =getNodeSet(htmlParse(url))
metaNode =getNodeSet(htmlParse(url),path = "//table")
metaNode
dataNode =getNodeSet(htmlParse(url),path = "//table")
x=unlist(sapply(xpathSApply(dataNode[[1]],'//a',xmlAttrs),'[[',1))
x
dataNode =getNodeSet(htmlParse(url),path = "//a")
x=unlist(sapply(xpathSApply(dataNode[[1]],'//a',xmlAttrs),'[[',1))
View(x)
View(data.frame(x))
which(str_detect(x,"CurGuid="))
library(stringr)
which(str_detect(x,"CurGuid="))
which(str_detect(x,"/Eng"))
x[which(str_detect(x,"/Eng"))]
dataNode =getNodeSet(htmlParse(url),path = "./a")
dataNode =getNodeSet(htmlParse(url),path = "/a")
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]"))
x=unlist(sapply(xpathSApply(dataNode[[1]],'//a',xmlAttrs),'[[',1))
x
dataNode
x=unlist(sapply(xpathSApply(dataNode[[1]],'//onclick',xmlAttrs),'[[',1))
x=unlist(sapply(xpathSApply(dataNode[[1]],'./onclick',xmlAttrs),'[[',1))
x=unlist(sapply(xpathSApply(dataNode[[1]],'onclick',xmlAttrs),'[[',1))
dataNode =getNodeSet(htmlParse(url),("//a[contains(@onclick,'curGuid')]"))
dataNode =getNodeSet(htmlParse(url),("//a[contains(@onclick,'curGuid=')]"))
dataNode =getNodeSet(htmlParse(url),("/a[contains(@onclick,'curGuid=')]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]/a"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]"))
x=unlist(sapply(xpathSApply(dataNode[[1]],"//a[contains(@onclick,'curGuid=')]",xmlAttrs),'[[',1))
x=unlist(sapply(xpathSApply(dataNode[[1]],"//td[contains(@onclick,'curGuid=')]",xmlAttrs),'[[',1))
x=unlist(sapply(xpathSApply(dataNode[[1]],"/td[contains(@onclick,'curGuid=')]",xmlAttrs),'[[',1))
x=unlist(sapply(xpathSApply(dataNode[[1]],"./td[contains(@onclick,'curGuid=')]",xmlAttrs),'[[',1))
x=unlist(sapply(xpathSApply(dataNode[[1]],"./td[@onclick]",xmlAttrs),'[[',1))
x=unlist(sapply(xpathSApply(dataNode[[1]],"//td[@onclick]",xmlAttrs),'[[',1))
x
dataNode =getNodeSet(htmlParse(url),("//td[@onclick]"))
dataNode[[1]]
dataNode
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]"))
x=unlist(sapply(xpathSApply(dataNode[[1]],"//td[@onclick]",xmlAttrs),'[[',1))
x
x=unlist(sapply(xpathSApply(dataNode[[1]],"//td[@href]",xmlAttrs),'[[',1))
x=unlist(sapply(xpathSApply(dataNode[[1]],"//td",xmlAttrs),'[[',1))
x
x=unlist(sapply(xpathSApply(dataNode[[1]],"//td[@onclick]",xmlAttrs),'[[',1))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td[@onclick]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a/@onclick"))
dataNode
dataNode[[4]]
dataNode[[4]][1]
dataNode[[4]][1]
class(dataNode[[4]][1])
str_detect(dataNode[[4]][1],"'")
str_locate_all(dataNode[[4]][1],"'")
dataNode[[4]][1]
str_split(dataNode[[4]][1],"'",n=3)
str_split(dataNode[[4]][1],"'",n=2)
str_split(dataNode[[4]][1],"'",n=2)[[1]][2]
str_split(dataNode[[4]][1],"'",n=3)[[1]][2]
paste0("www.tase.com",str_split(dataNode[[4]][1],"'",n=3)[[1]][2])
paste0("www.tase.co.il",str_split(dataNode[[4]][1],"'",n=3)[[1]][2])
y=getNodeSet(htmlParse(paste0("www.tase.co.il",str_split(dataNode[[4]][1],"'",n=3)[[1]][2])),"//table")
y=getNodeSet(htmlParse(paste0("www.tase.co.il",str_split(dataNode[[4]][1],"'",n=3)[[1]][2]),isURL = T),"//table")
y=getNodeSet(htmlParse(paste0("http://www.tase.co.il",str_split(dataNode[[4]][1],"'",n=3)[[1]][2]),isURL = T),"//table")
y=getNodeSet(htmlParse(paste0("https://www.tase.co.il",str_split(dataNode[[4]][1],"'",n=3)[[1]][2]),isURL = T),"//table")
system("phantomjs.exe get_tase_popup.js")
system("phantomjs.exe get_tase_popup.js")
dataNode
xmlValue(dataNode[[4]])
dataNode[[4]]
xmlAttrs(dataNode)
xmlAttrs(dataNode,"value")
xmlAttrs(dataNode,"//value")
xmlAttrs(dataNode[[4]],"value")
dataNode[[4]]
class(dataNode[[4]])
x=unlist(sapply(xpathSApply(dataNode[[1]],"//td",xmlAttrs),'[[',1))
x=unlist(sapply(xpathSApply(dataNode,"//td",xmlAttrs),'[[',1))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a/@onclick/td"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a/@onclick//td"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a/@onclic"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a/@onclick"))
dataNode
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a.@onclick"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a/@onclick/@value"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a//@onclick"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a//@onclick"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a//@onclick[last()]"))
dataNode
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a[last()]//@onclick"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a//@onclick"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a/@onclick"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a/@onclick[last()]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a[contains(@onclick,'CurGuid')]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a[contains(@onclick,'_blank')]"))
dataNode
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a[contains(@onclick,Pages)]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a[contains(@onclick,Pages)]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a/@onclick"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a[contains(@onclick,curGuid)]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td/a[contains(@onclick,'curGuid')]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a[contains(@onclick,'curGuid')]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a[contains(@onclick,curGuid)]"))
dataNode =getNodeSet(htmlParse(url),("//table[contains(@id,'tabAllShares')]
//td//a//@onclick"))
sasout=read_sas("C:\\Users\\yoni\\Downloads\\temp.sas7bdat")
library(haven)
install.packages("haven")
library(haven)
sasout=read_sas("C:\\Users\\yoni\\Downloads\\temp.sas7bdat")
View(sasout)
View(sasout)
